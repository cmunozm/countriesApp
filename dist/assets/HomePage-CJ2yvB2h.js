import{j as s,L as v,r as c,a as S,b as R,s as y,g as w}from"./index-CdAGcBuL.js";import{I as b,a as F,u as I}from"./Icon-C8OnqcKU.js";const L=({name:n,population:e,region:t,capital:i,urlImage:r})=>s.jsx("div",{className:"card",children:s.jsxs(v,{to:`/countries/${n}`,children:[s.jsx("img",{className:"card__image",src:r,alt:`Flag ${n}`}),s.jsxs("div",{className:"card__content",children:[s.jsx("h2",{className:"card__title",children:n}),s.jsxs("ul",{className:"card__description",children:[s.jsxs("li",{children:[s.jsx("span",{children:"Population:"}),e.toLocaleString()]}),s.jsxs("li",{children:[s.jsx("span",{children:"Region:"}),t]}),s.jsxs("li",{children:[s.jsx("span",{children:"Capital:"}),i]})]})]})]})}),A=({cards:n})=>s.jsx("section",{className:"card-list",children:n.map(e=>{var t;return s.jsx(L,{name:e.name||"",population:e.population||0,region:e.region,capital:((t=e.capital)==null?void 0:t.at(0))||"",urlImage:e.flag||""},e.name)})}),E=({options:n,firstOption:e,onChangeRegion:t})=>s.jsxs("select",{className:"dropdown",onChange:t,"aria-label":"Region",children:[s.jsx("option",{value:"all",children:e}),n.map(i=>s.jsx("option",{value:i,children:i},i))]}),T=({onChangeCountry:n})=>s.jsxs("span",{className:"search",children:[s.jsx(b,{className:"search__icon",icon:F}),s.jsx("input",{type:"text",className:"search__input",placeholder:"Search for a country...",onChange:n})]}),$=({regions:n,onChangeRegion:e,onChangeCountry:t})=>s.jsxs("section",{className:"filters",children:[s.jsx(T,{onChangeCountry:t}),s.jsx(E,{options:n,firstOption:"Filter by Region",onChangeRegion:e})]}),k=({totalPages:n,onChangePage:e})=>{const t=[],[i,r]=c.useState(1);for(let a=1;a<=n;a++)t.push(a);const l=a=>{r(a),e(a)};return s.jsx("ul",{className:"pagination",children:t.map(a=>s.jsx("li",{children:s.jsx("button",{className:a===i?"pagination__item pagination__item--active":"pagination__item",onClick:()=>l(a),children:a})},`page${a}`))})};function O(){const{loading:n,countries:e,getRegions:t,getByRegion:i,getByCountry:r}=I(),l=S(o=>o.countriesReducer.countries),[a,h]=c.useState(l),d=R(),j=t(),[m,u]=c.useState(1),g=16,x=m*g,C=x-g,_=a.slice(C,x),f=o=>{u(1);const p=o.target.value;p!==""?h(r(p)):d(w())};c.useEffect(()=>{n||(d(y(e)),h(e))},[n,e,d]);const N=({target:o})=>{u(1),h(i(o.value))},P=o=>{u(o),window.scrollTo({top:0,behavior:"smooth"})};return s.jsxs(s.Fragment,{children:[s.jsx($,{regions:j.sort(),onChangeRegion:N,onChangeCountry:f}),n?s.jsx("div",{className:"loading",children:s.jsx("span",{children:"Loading..."})}):s.jsxs(s.Fragment,{children:[s.jsx(A,{cards:_}),s.jsx(k,{totalPages:Math.round(a.length/g),onChangePage:P})]})]})}export{O as default};
